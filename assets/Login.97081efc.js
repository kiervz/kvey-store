import{r as l,u as z,j as e,a as o,L as A,b as $}from"./index.2e41866a.js";import{a as i}from"./AxiosClient.d2a9e21e.js";import{B as n}from"./Blocks.da878d90.js";import{I as w}from"./Input.5a99764f.js";import{c as D,a as N,u as E}from"./object.f81f9221.js";import{u as V}from"./useDispatch.0d25b7d8.js";const H="/assets/icon-google.52d12cc3.svg",O="/assets/icon-github.554884d7.svg",P="/assets/icon-fb.9f558a6c.svg",R="/assets/bg-login.eef2ddb4.png",U={email:"",password:""},W=D().shape({email:N().email("The email field must be a valid email address.").required("The email field is required."),password:N().min(8).required("The password field is required.")}),_=()=>{const{values:c,errors:d,handleBlur:m,handleChange:u,handleSubmit:y,isSubmitting:v,touched:F,isValid:k}=E({initialValues:U,validationSchema:W,onSubmit:(t,{setSubmitting:a})=>{q(t,a)}}),[L,g]=l.exports.useState(!1),[S,h]=l.exports.useState(!1),[B,J]=l.exports.useState(!1),[p,r]=l.exports.useState(null),I=V(),b=z(),C=async()=>{try{g(!0);const{data:t}=await i.get("/api/v1/auth/login/google");window.location.replace(t)}catch(t){const a=t.response.data.message;r(a)}finally{g(!1)}},T=async()=>{try{h(!0);const{data:t}=await i.get("/api/v1/auth/login/github");window.location.replace(t)}catch(t){const a=t.response.data.message;r(a)}finally{h(!1)}},j=()=>{console.log("under construction facebook auth")},q=async(t,a)=>{var x,f;try{const{data:s}=await i.post("/api/v1/auth/login",t);I($.setUser(s.response)),s!=null&&Boolean(s.response.user.roles.includes(1))?b("/dashboard"):s!=null&&Boolean(s.response.user.roles.includes(2))&&b("/home")}catch(s){const G=(f=(x=s==null?void 0:s.response)==null?void 0:x.data)==null?void 0:f.message;r(G)}finally{setTimeout(()=>{a(!1)},400)}};return e("section",{className:"bg-[#F9FAFB] min-h-screen flex items-center justify-center",children:o("div",{className:"bg-white flex rounded-2xl max-w-5xl shadow-lg",children:[o("div",{className:"sm:w-1/2 w-[100%] p-16",children:[e("h2",{className:"font-bold text-2xl",children:"Login"}),e("p",{className:"text-sm mt-4",children:"Log in your account"}),p!=null&&e("p",{className:"bg-red-200 p-2 rounded mt-4",children:p}),o("form",{className:"mt-4 flex flex-col gap-4",onSubmit:y,children:[e(w,{className:`py-2 px-3 rounded-xl border ${d.email!=null?"border-2 border-red-600":"1"}`,type:"text",name:"email",placeholder:"Email",value:c.email,onChange:u,onBlur:m}),e(w,{className:`py-2 px-3 rounded-xl border ${d.password!=null?"border-2 border-red-600":"1"}`,type:"password",name:"password",placeholder:"Password",value:c.password,onChange:u,onBlur:m}),e(n,{type:"submit",className:"bg-[#020a0f] text-white py-2 rounded-xl enabled:hover:bg-[#212529] disabled:bg-[#6F7275] duration-300",btnText:"Login",isDisabled:v||F!=null&&!k})]}),o("div",{className:"mt-5 mb-5 grid grid-cols-3 items-center gap-1",children:[e("hr",{}),e("p",{className:"text-center text-gray-500 text-sm",children:"OR"}),e("hr",{})]}),e(n,{className:"bg-white hover:bg-[#F4F4F4] duration-300 border py-2 w-full rounded-xl mt-3 flex justify-center items-center text-sm text-black",btnText:"Sigin with Google",onClick:C,loading:L,btnIcon:e("img",{src:H,className:"mr-2"})}),e(n,{className:"bg-white hover:bg-[#F4F4F4] duration-300 border py-2 w-full rounded-xl mt-3 flex justify-center items-center text-sm text-black",onClick:T,loading:S,btnText:"Sigin with Github",btnIcon:e("img",{src:O,className:"mr-2"})}),e(n,{className:"bg-white hover:bg-[#F4F4F4] duration-300 border py-2 w-full rounded-xl mt-3 flex justify-center items-center text-sm text-black",onClick:j,loading:B,btnText:"Sigin with Facebook",btnIcon:e("img",{src:P,className:"mr-2"})}),e("div",{className:"mt-8",children:o("p",{className:"text-sm",children:[e("span",{className:"text-gray-500",children:"Not registered yet? "}),e("span",{className:"font-bold cursor-pointer text-gray-800",children:e(A,{to:"/register",children:"Create an Account"})})]})})]}),o("div",{className:"sm:block hidden relative w-1/2 rounded-r-xl",children:[e("img",{className:"rounded-r-xl w-full h-full",src:R,alt:"login logo"}),e("p",{className:"absolute top-[10%] left-[37%] text-white text-sm font-bold z-10",children:"Nice to see you again"}),e("h2",{className:"absolute top-[15%] left-[25%] uppercase text-white text-4xl-clamp font-bold z-10",children:"Welcome back"}),e("p",{className:"absolute top-[80%] left-[35%] text-white text-sm font-bold z-10",children:"Sign in to continue access"}),e("p",{className:"absolute bottom-2 left-2 text-white",children:"www.kierveymaghanoy.com"})]})]})})};export{_ as Login,_ as default};

import{j as e,u as C,r as T,a as r,L as $}from"./index.2e41866a.js";import{a as S}from"./AxiosClient.d2a9e21e.js";import{B as _}from"./Blocks.da878d90.js";import{I as i}from"./Input.5a99764f.js";import{c as j,a as n,b as R,d as L,u as A}from"./object.f81f9221.js";import{n as D}from"./MessageHelper.26438f8e.js";const E=({value:m,onChange:o,children:c,id:l,name:s,className:d})=>e("select",{id:l,name:s,className:d,value:m,onChange:o,children:c}),I={name:"",email:"",gender:"male",birthday:"",password:"",password_confirmation:""},P=j().shape({name:n().required("The name field is required."),gender:n().required("The gender field is required."),birthday:R().default(()=>new Date),email:n().email("The email field must be a valid email address.").required("The email field is required."),password:n().min(8).required("The password field is required."),password_confirmation:n().oneOf([L("password"),null],"The password confirmation does not match.").required("The password confirmation field is required.")}),z=()=>{const m=C(),[o,c]=T.exports.useState(null),{values:l,errors:s,handleBlur:d,handleChange:t,handleSubmit:y,isSubmitting:v,touched:F,isValid:q}=A({initialValues:I,validationSchema:P,onSubmit:(u,{setSubmitting:h})=>{B(u,h)}}),B=async(u,h)=>{var p,b,f,g,x,w;try{const{data:a}=await S.post("/api/v1/auth/register",u);D("success",a.message),m("/login")}catch(a){const k=(p=a==null?void 0:a.response)==null?void 0:p.status;let N=(f=(b=a==null?void 0:a.response)==null?void 0:b.data)==null?void 0:f.message;k===422&&(N=(w=(x=(g=a==null?void 0:a.response)==null?void 0:g.data)==null?void 0:x.errors)==null?void 0:w.email[0]),c(N)}finally{setTimeout(()=>{h(!1)},400)}};return e("section",{className:"bg-[#F9FAFB] min-h-screen flex items-center justify-center",children:e("div",{className:"bg-white flex rounded-2xl max-w-6xl shadow-lg w-[600px]",children:r("div",{className:"w-[100%] p-16",children:[e("h2",{className:"font-bold text-2xl",children:"Register"}),e("p",{className:"text-sm mt-4",children:"Register to create an account."}),o!=null&&e("p",{className:"bg-red-200 p-2 rounded mt-6",children:o}),e("div",{className:"mt-5 md:col-span-2 md:mt-0",children:e("form",{onSubmit:y,className:"mt-6",children:r("div",{className:"grid grid-cols-1 gap-4",children:[r("div",{className:"flex flex-col",children:[e("label",{htmlFor:"name",className:"block text-sm font-medium text-gray-700",children:"Name"}),e(i,{type:"text",name:"name",id:"name",className:`p-2 mt-1 w-full rounded-xl border  ${s.name!=null?"border-2 border-red-600":""}`,value:l.name,onChange:t,onBlur:d})]}),r("div",{className:"flex flex-col",children:[e("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700",children:"Email"}),e(i,{type:"email",name:"email",id:"email",className:`p-2 mt-1 w-full rounded-xl border  ${s.email!=null?"border-2 border-red-600":""}`,value:l.email,onChange:t,onBlur:d})]}),r("div",{className:"grid grid-cols-2 gap-1",children:[r("div",{children:[e("label",{htmlFor:"gender",className:"block text-sm font-medium text-gray-700",children:"Gender"}),r(E,{id:"gender",name:"gender",className:`mt-1 block w-full rounded-xl border bg-white py-2.5 px-3 shadow-sm  ${s.gender!=null?"border-2 border-red-600":""}`,value:l.gender,onChange:t,children:[e("option",{value:"male",children:"Male"}),e("option",{value:"female",children:"Female"})]})]}),r("div",{children:[e("label",{htmlFor:"birthday",className:"block text-sm font-medium text-gray-700",children:"Birthday"}),e(i,{type:"date",name:"birthday",id:"birthday",className:`p-2 mt-1 w-full rounded-xl border  ${s.email!=null?"border-2 border-red-600":""}`,value:l.birthday,onChange:t,onBlur:d})]})]}),r("div",{className:"flex flex-col",children:[e("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700",children:"Password"}),e(i,{type:"password",name:"password",id:"password",className:`p-2 mt-1 w-full rounded-xl border  ${s.email!=null?"border-2 border-red-600":""}`,value:l.password,onChange:t,onBlur:d})]}),r("div",{className:"flex flex-col",children:[e("label",{htmlFor:"password_confirmation",className:"block text-sm font-medium text-gray-700",children:"Confirm Password"}),e(i,{type:"password",name:"password_confirmation",id:"password_confirmation",className:`p-2 mt-1 w-full rounded-xl border  ${s.email!=null?"border-2 border-red-600":""}`,value:l.password_confirmation,onChange:t,onBlur:d})]}),e(_,{type:"submit",className:"bg-[#020a0f] text-white py-2 rounded-xl enabled:hover:bg-[#212529] disabled:bg-[#6F7275] duration-300 mt-2",btnText:"Register",isDisabled:v||F!=null&&!q})]})})}),e("div",{className:"mt-8",children:r("p",{className:"text-sm",children:[e("span",{className:"text-gray-500",children:"Already have an account? "}),e("span",{className:"font-bold cursor-pointer text-gray-800",children:e($,{to:"/login",children:"Login here"})})]})})]})})})};export{z as Register,z as default};

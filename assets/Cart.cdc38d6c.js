import{a,F as k,l as S,j as e,r as x,L as j,i as f,g as T}from"./index.f58e1107.js";import{a as g}from"./AxiosClient.d2a9e21e.js";import{c as L}from"./index.esm.096085f6.js";import{c as b}from"./DisplayHelper.ddeb9bf2.js";import{T as A,B as w}from"./Blocks.b93ad752.js";import{I as B}from"./Input.b8c1bceb.js";import{b as H}from"./index.94663f93.js";import{u as F}from"./useDispatch.39f40752.js";import"./iconBase.5c92b7bb.js";const R=()=>e("div",{className:"fixed top-0 left-0 w-full h-screen z-40 bg-[#00000059]"}),G=()=>e("div",{className:"fixed w-full z-50 overflow-hidden h-full flex justify-center items-center",children:e(A,{height:"100",width:"100",radius:"9",color:"#000000",ariaLabel:"three-dots-loading",wrapperStyle:{},visible:!0})}),J=()=>a(k,{children:[S.createPortal(e(R,{}),document.getElementById("backdrop-root")),S.createPortal(e(G,{}),document.getElementById("overlay-root"))]}),K=({id:s,name:c,slug:m,brand:r,unit_price:i,price:l,discount:u,qty:D,sub_total:E,selected:O,image:_})=>{const y=F(),[p,N]=x.exports.useState(D),[Q,h]=x.exports.useState(!1),[z,P]=x.exports.useState(Boolean(O)),q=async t=>{var n,d;h(!0);try{const{data:o}=await g.put("/api/v1/cart/select",{cart_id:Number(t.target.value),is_selected:Number(!!t.target.checked)});P(!t.target.checked),y(f.setCart(o.response.data))}catch(o){const v=(d=(n=o.response)==null?void 0:n.data)==null?void 0:d.message;console.log(v)}finally{h(!1)}},M=()=>{p<100&&(N(t=>t+=1),C("add"))},$=()=>{p>1&&(N(t=>t-=1),C("subtract"))},C=async t=>{var n,d;h(!0);try{const{data:o}=await g.put("/api/v1/cart/quantity",{cart_id:s,action:t});y(f.setCart(o.response.data))}catch(o){const v=(d=(n=o.response)==null?void 0:n.data)==null?void 0:d.message;console.log(v)}finally{h(!1)}},I=async()=>{var t,n;h(!0);try{await g.delete("/api/v1/cart",{data:{cart_item_id:[s]}}),y(f.removeCartItem({cartId:s}))}catch(d){const o=(n=(t=d.response)==null?void 0:t.data)==null?void 0:n.message;console.log(o)}finally{h(!1)}};return a(k,{children:[Q?e(J,{}):"",e("div",{className:"w-[100%] h-auto pr-4 mt-4 mb-4",children:a("div",{className:"grid grid-cols-12",children:[a("div",{className:"ml-2 sm:ml-0 flex justify-center items-center gap-2 col-span-3 sm:col-span-2",children:[e(B,{type:"checkbox",id:m,className:"border-slate-300 text-slate-900 focus:ring-slate-200 cursor-pointer",value:s,checked:z,onChange:t=>q(t)}),e(j,{to:`/product/${m}`,children:e(H.exports.LazyLoadImage,{className:"h-24 w-[64px] lg:h-28 lg:w-20 object-cover",src:_,alt:"Product image"})})]}),a("div",{className:"flex items-start h-auto flex-col ml-2 col-span-9 sm:col-span-10",children:[e(j,{className:"text-md",to:`/product/${m}`,children:c}),a("div",{className:"grid grid-cols-12 w-[100%]",children:[e("div",{className:"col-span-full lg:col-span-5",children:e("p",{className:"text-sm",children:r})}),a("div",{className:"col-span-5 sm:col-span-4 lg:col-span-2",children:[e("p",{className:"text-orange-600",children:b(+l)}),u>0&&e("p",{className:"text-gray-500 line-through text-sm",children:b(+i)})]}),e("div",{className:"col-span-6 sm:col-span-5 lg:col-span-2",children:e("div",{className:"flex items-center justify-center w-min",children:a("div",{className:"flex",children:[e(w,{className:"disabled:bg-gray-100 disabled:text-gray-400 disabled:border-gray-200 hover:border-[#2563EB] enabled:hover:border-2 w-8 h-8 flex items-center justify-center rounded-l-lg cursor-pointer border-l-[1px] border-t-[1px] border-b-[1px] border-gray-300",btnText:"-",onClick:$,isDisabled:p===1}),e(B,{type:"text",className:"h-8 w-9 p-1 text-center border-[1px] border-gray-300",value:p,onChange:()=>N(p)}),e(w,{className:"disabled:bg-gray-100 disabled:text-gray-400 hover:border-[#2563EB] hover:border-2 w-8 h-8 flex items-center justify-center rounded-r-lg cursor-pointer border-r-[1px] border-t-[1px] border-b-[1px] border-gray-300",btnText:"+",onClick:M,isDisabled:p===99})]})})}),e("div",{className:"col-span-1 justify-center items-center sm:invisible",children:e(L,{className:"text-gray-500 cursor-pointer text-xl mt-[6px] sm:mt-0",onClick:I})}),a("div",{className:"hidden sm:block sm:col-span-2 lg:col-span-2",children:[e("p",{children:b(+E)}),e(L,{className:"text-gray-500 cursor-pointer text-xl mt-[6px] sm:mt-0",onClick:I})]})]})]})]})})]})},U=()=>{const[s,c]=x.exports.useState(!1);return e(k,{children:e(w,{type:"submit",className:"bg-[#020a0f] text-white py-2 rounded-xl enabled:hover:bg-[#212529] disabled:bg-[#6F7275] duration-300 w-[100%]",btnText:"Checkout",loading:s,onClick:async()=>{var r,i;c(!0);try{const{data:l}=await g.post("/api/v1/checkout");window.location.replace(l)}catch(l){const u=(i=(r=l.response)==null?void 0:r.data)==null?void 0:i.message;console.log(u)}finally{c(!1)}}})})},V=()=>{const s=T(c=>c.cart);return a("div",{className:"flex-[0.4] flex flex-col h-max rounded-md bg-white p-4",children:[e("h5",{className:"mb-4 mt-2 text-lg font-bold",children:"Order Summary"}),a("div",{className:"flex justify-between mt-3 w-[100%]",children:[a("p",{className:"text-gray-600",children:["Subtotal (",s.subTotalItems," items)"]}),e("p",{className:"text-black",children:b(+s.subTotal)})]}),a("div",{className:"flex justify-between mt-3 mb-3 w-[100%]",children:[e("p",{className:"text-gray-600",children:"Shipping Fee"}),e("p",{className:"text-black",children:b(0)})]}),e(U,{})]})},ce=()=>{const s=F(),c=T(r=>r.cart.cart),m=async()=>{var r,i;try{const{data:l}=await g.get("/api/v1/cart");s(f.setCart(l.response.data))}catch(l){const u=(i=(r=l.response)==null?void 0:r.data)==null?void 0:i.message;console.log(u)}};return x.exports.useEffect(()=>{m()},[]),e("div",{className:"container mx-auto py-2 px-4 ",children:c.length>0?a("div",{className:"flex flex-col md:flex-row mt-7 mobile:flex-col gap-2",children:[e("div",{className:"flex flex-col flex-1 bg-white rounded-md",children:c!=null&&c.map(r=>e(K,{...r},r.id))}),e(V,{})]}):e("div",{className:"bg-white p-5 rounded-lg",children:e("p",{className:"text-center",children:" No Carts Found."})})})};export{ce as Cart,ce as default};
